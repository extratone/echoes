var commonAction=function(){var n=!1,t={_urlRoot:"",_traditional:!1,_doAjax:function(n,t,e,i,o){i="function"==typeof i?i:this.ajaxError;var r={url:commonAction.remote._urlRoot+n,data:t,traditional:commonAction.remote._traditional,crossDomain:!0,dataType:"json",success:function(n){1==n.success||1==n.status?e&&e(n):i&&i(n)},error:function(){i&&i({msg:"Network error, please reload the page."})}};return o||(r.beforeSend=function(n){n.setRequestHeader("access_token",$.cookie("token"))}),$.ajax(r)},_fakeAjax:function(n,t){return setTimeout(function(){n(t)},500)},ajaxError:function(n){alert(n.msg)}},e={initScreen:function(n){var t=document.documentElement.clientWidth/document.documentElement.clientHeight;console.log("bs",t);var e=document.documentElement.clientWidth/812*312.5+"%";e=t>=3.2?document.documentElement.clientWidth/1e3*312.5+"%":t>=2.8?document.documentElement.clientWidth/950*312.5+"%":document.documentElement.clientWidth/812*312.5+"%",$("html").css("font-size",e),$("#app").removeClass("status"),$("#app").css({width:$(window).width()+"px",height:$(window).height()+"px"}),$("body").attr("data-mode",1),$(".shareTips-view").attr("data-mode",1),n&&n()},initScreen2:function(n){$("html").css("font-size",document.documentElement.clientWidth/375*312.5+"%"),$("#app").addClass("status"),$("#app").css({width:$(window).height()+"px",height:$(window).width()+"px"}),$("body").attr("data-mode",0),n&&n()},onorientationchange:function(){function n(){if(90==window.orientation||-90==window.orientation||void 0===window.orientation&&document.documentElement.clientWidth>document.documentElement.clientHeight){setTimeout(e.initScreen,300)}else{{setTimeout(e.initScreen2,300)}$("#forhorview").css("display","none")}$("body,html").scrollTop(0),$("body,html").scrollLeft(0)}0==$("#forhorview").length&&$("body").append("<div id='forhorview'><p>\u63a8\u8350\u4f7f\u7528\u7ad6\u5c4f\u6d4f\u89c8\u54e6~</p></div>"),window.addEventListener("onorientationchange"in window?"orientationchange":"resize",function(t){n(t)},!1),window.addEventListener("resize",function(t){n(t)},!1),n("init");var t=window.orientation;setInterval(function(){window.orientation!=t&&(t=window.orientation,n("t"))},1e3)},preloadImg:function(){for(var n=[],t=$("#preload_list img"),e=t.length;e--;)n.push(t.eq(e).data("src"));var o=$("#LoadingMark");n.length?i.imgLoader.init(n,function(){window.Page&&new Page,o.addClass("remove")},function(n){o.find(".value").text(n+"%"),o.find("i").width(n+"%")}).load():(o.remove(),window.Page&&new Page)},fixList:function(){$(".newsList").each(function(n,t){function e(n){return n.length<a?n:n.substr(0,a-2)+"..."}var i,o=$(t),r=o.find("li"),a=20,d=4;a=void 0===o.attr("data-textLength")?a:o.attr("data-textLength"),d=void 0===o.attr("data-rows")?d:o.attr("data-rows"),r.length>=d?o.find(".newsMore").show():o.find(".newsMore").hide();for(var n=r.length;n--;)i=$.trim(r.eq(n).find("a").html()),r.eq(n).find("a").html(e(i))})},fixBanner:function(){for(var n=$("#slideBox .bd li").length,t="",e=0;n>e;e++)t+="<li></li>";$("#slideBox .hd ul").html(t),$(".slideTxtBox ul").each(function(n,t){$(t).find("li").length<4&&$(t).find(".more").hide()})},bindPrototype:function(){Number.prototype.pad2=function(){return this.pad()},Number.prototype.pad=function(n){n||(n=2);for(var t=String(this),e=0,i="";e<n-t.length;e++)i+="0";return i+t},Date.prototype.format=function(n){var t=new Date,t=this,e=t.getMonth()+1,i=t.getHours(),o=t.getMinutes(),r=t.getDate(),a=t.getSeconds(),d={yyyy:t.getFullYear(),yy:String(t.getFullYear()).substr(2),MM:e.pad2(),M:e,dd:r.pad2(),d:r,HH:i.pad2(),H:i,mm:o.pad2(),m:o,ss:a.pad2(),s:a,fff:t.getMilliseconds().pad(3)};return n.replace(/([a-zA-Z]+)/g,function(n,t){return void 0===d[t]?t:d[t]})}}},i={imgLoader:{_srcs:[],_onLoaded:null,_onLoading:null,load:function(){function n(){++r===o?a._onLoaded&&a._onLoaded():a._onLoading&&a._onLoading(Math.floor(r/o*100))}var t,e,i=this._srcs,o=i.length,r=0,a=this;if(!o)return a._onLoaded&&a._onLoaded(),this;for(e=o;e--;)t=new Image,t.onload=n,t.src=i[e];return this},init:function(n,t,e){return this._srcs=n.slice(0),this._onLoaded=t,this._onLoading=e,this}},loadimgFn:function(n,t){for(var e,i=n,o=0,r=0;r<i.length;r++)e=new Image,e.src=i[r],e.onload=function(){o++,o==i.length&&t&&t()}},randomNumFn:function(n,t){return t=void 0===t?0:t,Math.floor(t+Math.random()*(n+1-t))},isDuringDate:function(n,t,e){var i=e,o=new Date(n).getTime(),r=new Date(t).getTime();return i>=o&&r>=i?!0:!1},urlpsFn:function(n){n=n||window.location.href;var t,e,i,o,r,a,d,u,c,s="";for(n.indexOf("#")>=0&&(s=n.substr(n.indexOf("#")+1,n.length),n=n.replace("#"+s,"")),t="",n.indexOf("?")>=0&&(t=n.substr(n.indexOf("?")+1,n.length),n=n.replace("?"+t,"")),e=n,i=t.split("&"),o=i.length,d=[],u=[],r=0;o>r;r++)a=i[r].split("="),d[a[0]]=a[1];for(c=s.split("&"),o=c.length,r=0;o>r;r++)a=c[r].split("="),u[a[0]]=a[1];return{lists:function(){return d},data:function(n,t){if("undefined"==typeof t){var e=d[n.toLowerCase()];return"undefined"==typeof e?"":e}d[n]=t},hash:function(n,t){if("undefined"==typeof t){var e=u[n.toLowerCase()];return"undefined"==typeof e?"":e}u[n]=t},getHash:function(){var n,t,e=[];for(n in u)u[n]&&e.push(n+"="+u[n]);return t="",e.length>0&&(t=e.join("&")),t},url:function(){var n,t,i,o=[];for(n in d)d[n]&&o.push(n+"="+d[n]);t="",o.length>0&&(t="?"+o.join("&")),o=[];for(n in u)u[n]&&o.push(n+"="+u[n]);return i="",o.length>0&&(i="#"+o.join("&")),e+""+t+i}}},validPhone:function(n){return/^(13|14|15|16|17|18|19)\d{9}$/.test(n)},validAccount:function(n){return!(!n||!/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/gi.test(n))},validMail:function(n){return/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/.test(n)},queryString:function(n,t){t=void 0===t?location.search:t;var e=new RegExp("(?:&|/?)"+n+"=([^&$]+)").exec(t);return e?e[1]:""},phoneSecret:function(n){return n.replace(/^(\d{3})\d{4}(\d+)/,"$1****$2")},stringFormat:function(n){var t,e=typeof n,i=arguments;switch(e){case"string":t=n.replace(/({(\d+?)})/g,function(n,t,e){return i[1*e+1]})}return t},isWeiXin:function(){var n=navigator.userAgent.toLowerCase();return"micromessenger"==n.match(/MicroMessenger/i)?!0:!1}},o={versions:function(){{var n=navigator.userAgent;navigator.appVersion}return{trident:n.indexOf("Trident")>-1,presto:n.indexOf("Presto")>-1,webKit:n.indexOf("AppleWebKit")>-1,gecko:n.indexOf("Gecko")>-1&&-1==n.indexOf("KHTML"),mobile:!!n.match(/AppleWebKit.*Mobile.*/),ios:!!n.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:n.indexOf("Android")>-1||n.indexOf("Linux")>-1,iPhone:n.indexOf("iPhone")>-1,iPad:n.indexOf("iPad")>-1,webApp:-1==n.indexOf("Safari")}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},r=function(t){return void 0!==t&&(n=!!t),n},a=function(){e.preloadImg(),e.fixBanner(),e.bindPrototype()};return{browser:o,debug:r,remote:t,fn:i,init:a}}(),ca=commonAction;$(function(){commonAction.init()});